<html>
	<head>
		<title>Sphere Drawing</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="lib/three.min.js"></script>
		<script src="lib/TrackballControls.js"></script>
		<script src="lib/stats.min.js"></script>
		<script src="lib/FileSaver.min.js"></script>
		<script src="lib/STLFileSaver.js"></script>
		<script src="js/render.js"></script> <!-- moved evironment initialization -->
		<script>
			//initial values
			var posX = 0;
			var posY = 0;
			var posZ = 0;
			var strokeSize = 0.1;
			var TOTAL_NUM_SPHERES = 100;
			
			//our test function
			function addRandomSphere() {
				addSphere(posX, posY, posZ, strokeSize); //this is how we do it!
				//randomly generate next sphere's parameters
				posX+=(Math.random()-0.5)*0.3;
				posY+=(Math.random()-0.5)*0.3;
				posZ+=(Math.random()-0.5)*0.3;
				var strokeVariation = (Math.random()-0.5)*0.1;
				if (strokeSize + strokeVariation > 0) {
					strokeSize+=strokeVariation;
				}
				numberOfSpheres++;
			}
			
			while (numberOfSpheres < TOTAL_NUM_SPHERES) {
				addRandomSphere();
			}
			
			//try exporting file
			stlString += "endsolid";
			var blob = new Blob([stlString], {type: 'text/plain'});
			saveAs(blob, 'mesh.stl');
		</script>
	</body>
</html>